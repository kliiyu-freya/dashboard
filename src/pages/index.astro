---
import DashboardLayout from '../layouts/DashboardLayout.astro';
import Card from '../components/Card.astro';
import Icon from '../components/ui/Icon.astro';
---

<DashboardLayout title="Dashboard">
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <Card title="Device Status">
      <div class="device-count text-4xl font-bold text-primary-600 dark:text-primary-500">--</div>
      <div class="text-sm text-gray-600 dark:text-gray-400">Active Connections</div>
    </Card>
    
    <Card title="System Health">
      <div class="flex items-center">
        <Icon name="check_circle" class="text-green-500 mr-2" />
        <span>All Systems Operational</span>
      </div>
    </Card>

    <Card title="Recent Activity">
      <ul class="space-y-4">
        <li class="flex items-center text-sm">
          <Icon name="lightbulb" class="text-gray-400 mr-2" />
          <span>Living Room Lights turned on</span>
        </li>
        <li class="flex items-center text-sm">
          <Icon name="thermostat" class="text-gray-400 mr-2" />
          <span>Temperature adjusted to 72Â°F</span>
        </li>
      </ul>
    </Card>
  </div>
</DashboardLayout>

<script>
  let deviceCount = document.querySelector('.device-count');

  window.addEventListener('freya:network_info', (event: CustomEvent) => {
    deviceCount.textContent = event.detail.connections;
  });
</script>